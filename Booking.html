<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="booking.css">
    <title>Seru Booking</title>
</head>
<body>
    <header>
        <div class="logo">
            <img src="img/LogoSeru.png" alt="Logo Seru">
        </div>
        <nav>
            <a id="profileBtn">
                <span>üë§</span>
                <span>Profile</span>
            </a>
            <ul class="profile-menu" id="profileMenu">
                <li id="profileUserBtn">üë§ Profile Users</li>
                <li id="myBookingsBtn">üìã My Bookings</li>
                <li>üö™ Logout</li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <h1>Book Your Meeting Room</h1>
        <p>Professional spaces for your business needs</p>
    </section>

    <div class="container">
        <h2>Available Meeting Rooms</h2>
        <p>Choose from our selection of professional meeting spaces</p>

        <div class="rooms-grid" id="roomsGrid">
        </div>
    </div>

    <!-- Modal Booking -->
    <div class="modal" id="bookingModal">
        <div class="modal-content">
            <span class="close-btn" id="closeModal">&times;</span>
            
            <div class="step-indicator">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-title">Details</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-title">Payment</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-title">Confirm</div>
                </div>
            </div>

            <div id="modalBody">
            </div>
        </div>
    </div>

    <!-- Modal Profile Users -->
    <div class="modal" id="profileModal">
        <div class="modal-content modal-profile">
            <span class="close-btn" id="closeProfileModal">&times;</span>
            <h2>üë§ Profile Users</h2>
            <div class="profile-container">
                <div class="profile-info">
                    <div class="profile-info-row">
                        <div class="profile-label">üë§ Full Name</div>
                        <div class="profile-value">John Doe</div>
                    </div>
                    <div class="profile-info-row">
                        <div class="profile-label">üè¢ Company/Organization</div>
                        <div class="profile-value">PT Seru Indonesia</div>
                    </div>
                    <div class="profile-info-row">
                        <div class="profile-label">üìß Email</div>
                        <div class="profile-value">john@example.com</div>
                    </div>
                    <div class="profile-info-row">
                        <div class="profile-label">üì± Phone Number</div>
                        <div class="profile-value">+62 812 3456 7890</div>
                    </div>
                    <div class="profile-info-row">
                        <div class="profile-label">üìÖ Member Since</div>
                        <div class="profile-value">January 2024</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal My Bookings -->
    <div class="modal" id="bookingsModal">
        <div class="modal-content modal-large">
            <span class="close-btn" id="closeBookingsModal">&times;</span>
            <h2>üìã My Bookings</h2>
            <div class="bookings-container">
                <div class="bookings-tabs">
                    <button class="tab-btn active" onclick="filterBookings('completed')">Completed</button>
                    <button class="tab-btn" onclick="filterBookings('cancelled')">Cancelled</button>
                </div>
                
                <div id="bookingsList" class="bookings-list">
                    <!-- Bookings will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const rooms = [
            {
                id: 1,
                name: "Meeting Room",
                description: "A comfortable space designed for productive discussions and important meetings.",
                price: 500000,
                image: "img/meetingroom.jpg"
            },
            {
                id: 2,
                name: "Private Office",
                description: "A calm and private space where you can work without distractions, think clearly, and make progress in peace.",
                price: 250000,
                image: "img/privateoffice.jpg"
            },
            {
                id: 3,
                name: "Virtual Office",
                description: "A flexible business solution that provides a professional address and essential office services without the need for a physical workspace.",
                price: 1200000,
                image: "img/virtualoffice.jpg"
            },
            {
                id: 4,
                name: "Class Room",
                description: "A well-equipped space designed for training sessions, workshops, and learning activities in a comfortable environment.",
                price: 700000,
                image: "img/classroom.jpg"
            },
            {
                id: 5,
                name: "Coworking Space",
                description: "A shared workspace designed for collaboration, creativity, and productivity among professionals and teams.",
                price: 950000,
                image: "img/coworkingspace.jpg"
            },
            {
                id: 6,
                name: "Event Space",
                description: "A versatile venue designed to host meetings, workshops, seminars, and special events in a comfortable and professional setting.",
                price: 350000,
                image: "img/eventspace.jpg"
            }
        ];

        // Sample bookings data - hanya completed dan cancelled
        let myBookings = [
            {
                id: 'BK001',
                roomName: 'Meeting Room',
                startDate: '2024-10-15',
                endDate: '2024-10-17',
                total: 1500000,
                status: 'completed',
                company: 'PT Seru Indonesia'
            },
            {
                id: 'BK002',
                roomName: 'Private Office',
                startDate: '2024-10-20',
                endDate: '2024-10-22',
                total: 500000,
                status: 'completed',
                company: 'PT Maju Jaya'
            },
            {
                id: 'BK003',
                roomName: 'Event Space',
                startDate: '2024-10-25',
                endDate: '2024-10-26',
                total: 350000,
                status: 'cancelled',
                company: 'CV Sukses Makmur'
            },
            {
                id: 'BK004',
                roomName: 'Class Room',
                startDate: '2024-11-01',
                endDate: '2024-11-03',
                total: 2100000,
                status: 'completed',
                company: 'PT Teknologi Maju'
            }
        ];

        let currentRoom = null;
        let currentStep = 1;
        let bookingData = {};

        function renderRooms() {
            const grid = document.getElementById('roomsGrid');
            grid.innerHTML = rooms.map(room => `
                <div class="room-card" onclick="openBookingModal(${room.id})">
                    <div class="room-image" style="background-image: url('${room.image}')"></div>
                    <div class="room-info">
                        <div class="room-name">${room.name}</div>
                        <div class="room-details">${room.description}</div>
                        <div class="room-price">Rp ${room.price.toLocaleString('id-ID')}/day</div>
                        <button class="btn">Book Now</button>
                    </div>
                </div>
            `).join('');
        }

        function openBookingModal(roomId) {
            currentRoom = rooms.find(r => r.id === roomId);
            currentStep = 1;
            bookingData = {};
            document.getElementById('bookingModal').classList.add('active');
            renderStep1();
        }

        // Close modals
        document.getElementById('closeModal').onclick = function() {
            document.getElementById('bookingModal').classList.remove('active');
        };

        document.getElementById('closeProfileModal').onclick = function() {
            document.getElementById('profileModal').classList.remove('active');
        };

        document.getElementById('closeBookingsModal').onclick = function() {
            document.getElementById('bookingsModal').classList.remove('active');
        };

        // Open Profile Modal
        document.getElementById('profileUserBtn').onclick = function() {
            document.getElementById('profileMenu').classList.remove('active');
            document.getElementById('profileModal').classList.add('active');
        };

        // Open My Bookings Modal
        document.getElementById('myBookingsBtn').onclick = function() {
            document.getElementById('profileMenu').classList.remove('active');
            document.getElementById('bookingsModal').classList.add('active');
            renderBookings('completed'); // Default tampilkan completed
        };

        // Render Bookings
        function renderBookings(filter) {
            const list = document.getElementById('bookingsList');
            let filteredBookings = myBookings.filter(b => b.status === filter);

            if (filteredBookings.length === 0) {
                list.innerHTML = '<div class="no-bookings">No bookings found</div>';
                return;
            }

            list.innerHTML = filteredBookings.map(booking => `
                <div class="booking-item">
                    <div class="booking-row">
                        <div class="booking-main">
                            <div class="booking-title">${booking.roomName}</div>
                            <div class="booking-date">${booking.startDate} - ${booking.endDate}</div>
                        </div>
                        <div class="booking-right">
                            <div class="booking-price">Rp ${booking.total.toLocaleString('id-ID')}</div>
                            <span class="status-badge status-${booking.status}">${booking.status}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Filter Bookings
        function filterBookings(filter) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            renderBookings(filter);
        }

        // Step 1: Booking Details
        function renderStep1() {
            updateSteps(1);
            document.getElementById('modalBody').innerHTML = `
                <h2>Booking Details</h2>
                <form id="bookingForm">
                    <div class="form-group">
                        <label>Company/Organization Name</label>
                        <input type="text" id="guestName" required placeholder="Enter company name">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="guestEmail" required placeholder="your@email.com">
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="guestPhone" required placeholder="+62 xxx xxxx xxxx">
                    </div>
                    <div class="form-group">
                        <label>Start Date</label>
                        <input type="date" id="checkIn" required>
                    </div>
                    <div class="form-group">
                        <label>End Date</label>
                        <input type="date" id="checkOut" required>
                    </div>
                    <button type="submit" class="btn">Continue to Payment</button>
                </form>
            `;

            document.getElementById('bookingForm').onsubmit = function(e) {
                e.preventDefault();
                bookingData.name = document.getElementById('guestName').value;
                bookingData.email = document.getElementById('guestEmail').value;
                bookingData.phone = document.getElementById('guestPhone').value;
                bookingData.checkIn = document.getElementById('checkIn').value;
                bookingData.checkOut = document.getElementById('checkOut').value;
                renderStep2();
            };
        }

        // Step 2: Payment
        function renderStep2() {
            updateSteps(2);
            const days = calculateDays();
            const pricePerDay = currentRoom.price;
            const total = pricePerDay * days;

            document.getElementById('modalBody').innerHTML = `
                <h2>Payment Method</h2>
                <div class="booking-summary">
                    <div class="summary-row">
                        <span>Room:</span>
                        <span>${currentRoom.name}</span>
                    </div>
                    <div class="summary-row">
                        <span>Duration:</span>
                        <span>${bookingData.checkIn} - ${bookingData.checkOut} (${days} ${days > 1 ? 'days' : 'day'})</span>
                    </div>
                    <div class="summary-row summary-total">
                        <span>Total:</span>
                        <span>Rp ${total.toLocaleString('id-ID')}</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Select Payment Method</label>
                    <div class="payment-methods">
                        <div class="payment-method" onclick="selectPayment('credit')">
                            <div>üí≥</div>
                            <div>Credit Card</div>
                        </div>
                        <div class="payment-method" onclick="selectPayment('bank')">
                            <div>üè¶</div>
                            <div>Bank Transfer</div>
                        </div>
                        <div class="payment-method" onclick="selectPayment('ewallet')">
                            <div>üì±</div>
                            <div>E-Wallet</div>
                        </div>
                        <div class="payment-method" onclick="selectPayment('cash')">
                            <div>üíµ</div>
                            <div>Cash</div>
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="renderStep3()">Confirm Booking</button>
                <button class="btn btn-secondary" onclick="renderStep1()">Back</button>
            `;
        }

        // Select payment method
        function selectPayment(method) {
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            event.target.closest('.payment-method').classList.add('selected');
            bookingData.paymentMethod = method;
        }

        // Step 3: Confirmation
        function renderStep3() {
            if (!bookingData.paymentMethod) {
                alert('Please select a payment method');
                return;
            }

            updateSteps(3);
            const days = calculateDays();
            const total = currentRoom.price * days;

            document.getElementById('modalBody').innerHTML = `
                <div class="success-message">
                    <div class="success-icon">‚úÖ</div>
                    <h2>Booking Confirmed!</h2>
                    <p>Your meeting room booking has been successfully confirmed.</p>
                    
                    <div class="booking-summary">
                        <div class="summary-row">
                            <strong>Company:</strong>
                            <span>${bookingData.name}</span>
                        </div>
                        <div class="summary-row">
                            <strong>Email:</strong>
                            <span>${bookingData.email}</span>
                        </div>
                        <div class="summary-row">
                            <strong>Room:</strong>
                            <span>${currentRoom.name}</span>
                        </div>
                        <div class="summary-row">
                            <strong>Duration:</strong>
                            <span>${bookingData.checkIn} - ${bookingData.checkOut}</span>
                        </div>
                        <div class="summary-row">
                            <strong>Payment:</strong>
                            <span>${getPaymentName(bookingData.paymentMethod)}</span>
                        </div>
                        <div class="summary-row summary-total">
                            <strong>Total:</strong>
                            <span>Rp ${total.toLocaleString('id-ID')}</span>
                        </div>
                    </div>

                    <button class="btn" onclick="closeAndReset()">Done</button>
                </div>
            `;
        }

        // Helper functions
        function calculateDays() {
            if (!bookingData.checkIn || !bookingData.checkOut) return 1;
            const start = new Date(bookingData.checkIn);
            const end = new Date(bookingData.checkOut);
            const diff = Math.ceil((end - start) / (1000 * 60 * 60 * 24));
            return diff > 0 ? diff : 1;
        }

        function getPaymentName(method) {
            const names = {
                'credit': 'Credit Card',
                'bank': 'Bank Transfer',
                'ewallet': 'E-Wallet',
                'cash': 'Cash'
            };
            return names[method] || method;
        }

        function updateSteps(step) {
            document.querySelectorAll('.step').forEach((el, index) => {
                el.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    el.classList.add('completed');
                } else if (index + 1 === step) {
                    el.classList.add('active');
                }
            });
        }

        function closeAndReset() {
            document.getElementById('bookingModal').classList.remove('active');
            currentRoom = null;
            currentStep = 1;
            bookingData = {};
        }

        // Profile menu toggle
        document.getElementById('profileBtn').onclick = function(e) {
            e.stopPropagation();
            document.getElementById('profileMenu').classList.toggle('active');
        };

        document.addEventListener('click', function() {
            document.getElementById('profileMenu').classList.remove('active');
        });

        // Initialize
        renderRooms();
    </script>
</body>
</html>